# 日志规范

## 异常类型

1. `debug` 非常具体的信息，只能用于**开发调试使用**。部署到生产环境后，这个级别的信息只能保持很短的时间。这些信息只能临时存在，并将最终被关闭。要区分`DEBUG`和`TRACE`会比较困难，对一个在开发及测试完成后将被删除的`LOG输出`，可能会比较适合定义为T`RACE`级别.
2. `info` 重要的业务处理已经结束。在实际环境中，系统管理员或者高级用户要能理解`INFO`输出的信息并能**很快的了解应用正在做什么**。比如，一个和处理机票预订的系统，对每一张票要有且只有一条`INFO信`息描述 “`[Who] booked ticket from [Where] to [Where]`”。另外一种对`INFO`信息的定义是：记录显著改变应用状态的每一个`action`，比如：数据库更新、外部系统请求。
3. `warn` 发生这个级别问题时，处理过程可以继续，**但必须对这个问题给予额外关注**。这个问题又可以细分成两种情况：

- 第一种是存在严重的问题但有应急措施（比如数据库不可用，使用Cache）；
- 第二种是潜在问题及建议（ATTENTION）。

比如生产环境的应用运行在`Development`模式下、管理控制台没有密码保护等。系统可以允许这种错误的存在，但必须及时做跟踪检查用户参数错误。可以使用`warn`日志级别来记录用户输入参数错误的情况，避免用户投诉时，无所适从。

4.`error` 系统中发生了非常严重的问题，**必须马上有人进行处理**。没有系统可以忍受这个级别的问题的存在。比如：NPEs（空指针异常），数据库不可用，关键业务流程中断等等。

## 日志规范建议

- 日志文件推荐至少保存 15 天，因为有些异常具备以“周”为频次发生的特点；
- 对 trace/debug/info 级别的日志输出，存在占位符匹配组合方式输出，需要增加条件判断，避免无意义的调用消耗资源；
- 可以使用 warn 日志级别来记录用户输入参数错误的情况，避免用户投诉时，无所适从；
- 不允许出现 `printStackTrace`；
- 不允许出现 `System print`(包括System.out.println和System.error.println)语句；
- `LOGGER.error(“Bad things : {}“,e); `正确；
- 